<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>School Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #ffe6f2;
      margin: 0;
      padding: 20px;
    }
    h1, h2 {
      color: #d63384;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .widget {
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      flex: 1 1 400px;
    }
    input, button, select, textarea {
      margin: 5px 0;
      padding: 5px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid #ccc;
      text-align: left;
      padding: 5px;
    }
    .back-btn {
      background: #d63384;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <button class="back-btn" onclick="location.href='index.html'">‚¨Ö Back to Profile</button>
  <h1>üìö School Dashboard</h1>

  <div class="container">

    <!-- To-Do List -->
    <div class="widget">
      <h2>üìù To-Do List</h2>
      <input type="text" id="todoInput" placeholder="New Task">
      <button onclick="addTodo()">Add</button>
      <ul id="todoList"></ul>
    </div>

    <!-- Homework Tracker -->
    <div class="widget">
      <h2>üìñ Homework Tracker</h2>
      <input type="text" id="hwSubject" placeholder="Subject"><br>
      <input type="text" id="hwDesc" placeholder="Description"><br>
      <input type="date" id="hwDue"><br>
      <button onclick="addHomework()">Add Homework</button>
      <ul id="hwList"></ul>
    </div>

    <!-- Daily Schedule -->
    <div class="widget">
      <h2>üìÖ Daily Schedule</h2>
      <table id="scheduleTable">
        <thead>
          <tr><th>Time</th><th>Activity</th><th>Action</th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <input type="text" id="timeInput" placeholder="e.g. 9:00 AM">
      <input type="text" id="activityInput" placeholder="e.g. Math Class">
      <button onclick="addSchedule()">Add</button>
    </div>

    <!-- Calendar Widget -->
    <div class="widget">
      <h2>üìÜ Calendar</h2>
      <iframe src="https://calendar.google.com/calendar/embed?mode=MONTH" style="border:0" width="100%" height="400" frameborder="0" scrolling="no"></iframe>
    </div>

  </div>

<script>
  /* ---------- TO-DO LIST ---------- */
  let todos = JSON.parse(localStorage.getItem("todos") || "[]");
  const todoList = document.getElementById("todoList");

  function renderTodos() {
    todoList.innerHTML = "";
    todos.forEach((t,i) => {
      const li = document.createElement("li");
      li.textContent = t;
      const del = document.createElement("button");
      del.textContent = "‚ùå";
      del.onclick = () => { todos.splice(i,1); saveTodos(); };
      li.appendChild(del);
      todoList.appendChild(li);
    });
  }
  function addTodo() {
    const val = document.getElementById("todoInput").value.trim();
    if(val) {
      todos.push(val);
      saveTodos();
      document.getElementById("todoInput").value="";
    }
  }
  function saveTodos() {
    localStorage.setItem("todos", JSON.stringify(todos));
    renderTodos();
  }
  renderTodos();

  /* ---------- HOMEWORK TRACKER ---------- */
  let homework = JSON.parse(localStorage.getItem("homework") || "[]");
  const hwList = document.getElementById("hwList");

  function renderHomework() {
    hwList.innerHTML = "";
    homework.forEach((h,i) => {
      const li = document.createElement("li");
      const due = new Date(h.due).getTime();
      const now = new Date().getTime();
      const diff = due - now;
      const days = Math.floor(diff / (1000*60*60*24));
      li.textContent = `${h.subject}: ${h.desc} (Due: ${h.due}, ${days} days left)`;
      const del = document.createElement("button");
      del.textContent = "‚ùå";
      del.onclick = () => { homework.splice(i,1); saveHomework(); };
      li.appendChild(del);
      hwList.appendChild(li);
    });
  }
  function addHomework() {
    const subject = document.getElementById("hwSubject").value.trim();
    const desc = document.getElementById("hwDesc").value.trim();
    const due = document.getElementById("hwDue").value;
    if(subject && desc && due) {
      homework.push({subject, desc, due});
      saveHomework();
      document.getElementById("hwSubject").value="";
      document.getElementById("hwDesc").value="";
      document.getElementById("hwDue").value="";
    }
  }
  function saveHomework() {
    localStorage.setItem("homework", JSON.stringify(homework));
    renderHomework();
  }
  renderHomework();

  /* ---------- DAILY SCHEDULE ---------- */
  let schedule = JSON.parse(localStorage.getItem("schedule") || "[]");
  const tableBody = document.querySelector("#scheduleTable tbody");

  function renderSchedule() {
    tableBody.innerHTML = "";
    schedule.forEach((s,i) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${s.time}</td><td>${s.activity}</td>`;
      const td = document.createElement("td");
      const del = document.createElement("button");
      del.textContent = "‚ùå";
      del.onclick = () => { schedule.splice(i,1); saveSchedule(); };
      td.appendChild(del);
      tr.appendChild(td);
      tableBody.appendChild(tr);
    });
  }
  function addSchedule() {
    const time = document.getElementById("timeInput").value.trim();
    const activity = document.getElementById("activityInput").value.trim();
    if(time && activity) {
      schedule.push({time, activity});
      saveSchedule();
      document.getElementById("timeInput").value="";
      document.getElementById("activityInput").value="";
    }
  }
  function saveSchedule() {
    localStorage.setItem("schedule", JSON.stringify(schedule));
    renderSchedule();
  }
  renderSchedule();
</script>

</body>
</html>
