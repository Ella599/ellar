<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ella's Profile</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: pink;
      color: #333;
      overflow-x: hidden;
      transition: background 0.5s;
    }

    header {
      display: flex;
      align-items: center;
      padding: 10px 20px;
      background: #ff99cc;
    }

    #profilePic {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      margin-right: 15px;
      border: 3px solid white;
      object-fit: cover;
    }

    #name {
      font-size: 24px;
      font-weight: bold;
      color: white;
      flex-grow: 1;
    }

    #controls {
      position: absolute;
      top: 15px;
      left: 120px;
      background: rgba(255, 255, 255, 0.9);
      padding: 5px 10px;
      border-radius: 10px;
      display: flex;
      gap: 10px;
      align-items: center;
      z-index: 10;
    }

    #board {
      display: block;
      width: 100%;
      height: calc(100vh - 250px);
      border-top: 2px solid white;
      cursor: crosshair;
    }

    .countdowns {
      display: flex;
      justify-content: space-between;
      padding: 10px 20px;
      background: #ffe6f2;
    }

    .countdown {
      font-size: 18px;
      font-weight: bold;
      color: #cc0066;
    }

    #pet {
      position: absolute;
      bottom: 20px;
      right: 20px;
      width: 200px;
      height: 200px;
      background: #fff0f5;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    }

    footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background: #ffccdd;
      flex-wrap: wrap;
      gap: 10px;
    }

    button {
      background: #ff66aa;
      border: none;
      padding: 8px 12px;
      color: white;
      border-radius: 8px;
      cursor: pointer;
    }

    button:hover {
      background: #ff3385;
    }

    #inspiration {
      text-align: center;
      padding: 10px;
      font-style: italic;
      background: #fff0f5;
      color: #660033;
    }
  </style>
</head>
<body>
  <header>
    <img id="profilePic" src="Screenshot 2025-09-25 082821.png" alt="Profile Picture">
    <div id="name">Ella Fehlauer</div>
    <input type="file" id="picUpload" accept="image/*">
    <button id="avatarBtn">Use Avatar</button>
  </header>

  <div class="countdowns">
    <div class="countdown" id="summer"></div>
    <div class="countdown" id="christmas"></div>
  </div>

  <!-- Inspiration -->
  <div id="inspiration">
    <div id="quote"></div>
    <button onclick="showAffirmation()">üíñ Daily Affirmation</button>
    <div id="affirmation"></div>
  </div>

  <!-- Whiteboard Controls -->
  <div id="controls">
    <label>Color:</label>
    <input type="color" id="colorPicker" value="#ff4d94">
    <button onclick="clearBoard()">Clear</button>
  </div>

  <canvas id="board"></canvas>

  <!-- 3D Pet -->
  <div id="pet"></div>
  <div style="position:absolute; bottom:230px; right:30px;">
    <button onclick="feedPet()">üçñ Feed Dog</button>
  </div>

  <footer>
    <button onclick="toggleTheme()">üé® Change Theme</button>
    <audio id="musicPlayer" controls>
      <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
      <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
    <button onclick="location.href='school.html'">üìö Go to School Page</button>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/loaders/GLTFLoader.js"></script>

  <script>
    /* ---------------- Profile Picture Upload ---------------- */
    const profilePic = document.getElementById("profilePic");
    const picUpload = document.getElementById("picUpload");
    const avatarBtn = document.getElementById("avatarBtn");

    const savedPic = localStorage.getItem("profilePic");
    if (savedPic) profilePic.src = savedPic;

    picUpload.addEventListener("change", function() {
      const file = this.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        profilePic.src = e.target.result;
        localStorage.setItem("profilePic", e.target.result);
      };
      reader.readAsDataURL(file);
    });

    avatarBtn.addEventListener("click", () => {
      const avatarUrl = "https://i.ibb.co/4Y3mJrh/avatar.png"; // sample avatar
      profilePic.src = avatarUrl;
      localStorage.setItem("profilePic", avatarUrl);
    });

    /* ---------------- Countdowns ---------------- */
    function updateCountdown(id, targetDate, label) {
      const now = new Date();
      const diff = targetDate - now;
      if (diff <= 0) {
        document.getElementById(id).textContent = `${label} is here!`;
        return;
      }
      const seconds = Math.floor(diff / 1000) % 60;
      const minutes = Math.floor(diff / (1000 * 60)) % 60;
      const hours = Math.floor(diff / (1000 * 60 * 60)) % 24;
      const days = Math.floor(diff / (1000 * 60 * 60 * 24)) % 30;
      const months = Math.floor(diff / (1000 * 60 * 60 * 24 * 30)) % 12;
      const years = Math.floor(diff / (1000 * 60 * 60 * 24 * 365));
      document.getElementById(id).textContent =
        `${label}: ${years}y ${months}m ${days}d ${hours}h ${minutes}m ${seconds}s`;
    }
    setInterval(() => {
      updateCountdown("christmas", new Date("2025-12-25"), "üéÑ Christmas");
      updateCountdown("summer", new Date("2026-05-29"), "‚òÄÔ∏è Summer Vacation");
    }, 1000);

    /* ---------------- Whiteboard ---------------- */
    const canvas = document.getElementById("board");
    const ctx = canvas.getContext("2d");
    const colorPicker = document.getElementById("colorPicker");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight - 250;

    let drawing = false;

    canvas.addEventListener("mousedown", (e) => {
      drawing = true;
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    });
    canvas.addEventListener("mouseup", () => { drawing = false; ctx.beginPath(); });
    canvas.addEventListener("mousemove", draw);

    function draw(e) {
      if (!drawing) return;
      ctx.strokeStyle = colorPicker.value;
      ctx.lineWidth = 4;
      ctx.lineCap = "round";
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    }
    function clearBoard() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    /* ---------------- Inspiration ---------------- */
    const quotes = [
      "Believe in yourself and all that you are.",
      "Every day is a fresh start.",
      "Dream big and dare to fail.",
      "You are stronger than you think.",
      "Do something today that your future self will thank you for."
    ];
    document.getElementById("quote").textContent =
      quotes[Math.floor(Math.random() * quotes.length)];

    const affirmations = [
      "You are capable of amazing things.",
      "You light up the world with your smile.",
      "You can handle anything that comes your way.",
      "Keep going ‚Äî you‚Äôre doing great!",
      "You are loved, valued, and enough."
    ];
    function showAffirmation() {
      document.getElementById("affirmation").textContent =
        affirmations[Math.floor(Math.random() * affirmations.length)];
    }

    /* ---------------- 3D Dog Pet ---------------- */
    const petContainer = document.getElementById("pet");
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(
      50, petContainer.clientWidth / petContainer.clientHeight, 0.1, 1000
    );
    const renderer = new THREE.WebGLRenderer({ alpha: true });
    renderer.setSize(petContainer.clientWidth, petContainer.clientHeight);
    petContainer.appendChild(renderer.domElement);

    const light = new THREE.HemisphereLight(0xffffff, 0x444444, 1.2);
    scene.add(light);
    const dirLight = new THREE.DirectionalLight(0xffffff, 1);
    dirLight.position.set(3, 10, 5);
    scene.add(dirLight);

    let dog;
    const loader = new THREE.GLTFLoader();
    loader.load(
      "https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Fox/glTF-Binary/Fox.glb", 
      function(gltf) {
        dog = gltf.scene;
        dog.scale.set(0.02, 0.02, 0.02);
        dog.position.y = -1;
        scene.add(dog);
        camera.position.z = 5;
      },
      undefined,
      function(error) { console.error("Error loading model:", error); }
    );

    function animate() {
      requestAnimationFrame(animate);
      if (dog) dog.rotation.y += 0.01;
      renderer.render(scene, camera);
    }
    animate();

    petContainer.addEventListener("click", () => {
      if (dog) {
        dog.position.y = -0.5;
        setTimeout(() => dog.position.y = -1, 300);
      }
    });

    /* ---------------- Pet Interactions ---------------- */
    function feedPet() {
      const treat = document.createElement("div");
      treat.textContent = "üçñ";
      treat.style.position = "absolute";
      treat.style.fontSize = "24px";
      treat.style.bottom = "220px";
      treat.style.right = "60px";
      document.body.appendChild(treat);
      setTimeout(() => treat.remove(), 2000);
    }

    /* ---------------- Theme Toggle ---------------- */
    const themes = ["pink", "plum", "teal", "linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet)"];
    let currentTheme = 0;
    function toggleTheme() {
      currentTheme = (currentTheme + 1) % themes.length;
      document.body.style.background = themes[currentTheme];
    }
  </script>
</body>
</html>
