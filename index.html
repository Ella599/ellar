<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ella Fehlauer ‚Äî Profile</title>
  <style>
    :root {
      --pink: #ff69b4;
      --deep: #ff1493;
      --light: #ffe4f2;
      --purple: #a020f0;
      --teal: #20c5b6;
    }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background: var(--light);
      color: var(--deep);
      overflow-x: hidden;
    }
    header {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      background: linear-gradient(90deg, #ffd6e8, #fff0f5);
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      position: relative;
      z-index: 50;
    }
    #profilePic {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 3px solid white;
      object-fit: cover;
      margin-right: 16px;
    }
    #name {
      font-size: 22px;
      font-weight: bold;
      color: white;
    }
    #top-controls {
      margin-left: auto;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    #top-controls input[type="file"] {
      display: inline-block;
    }
    button, select, input {
      font-family: inherit;
    }
    button {
      background: var(--deep);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
    }
    button.secondary {
      background: white;
      color: var(--deep);
      border: 2px solid var(--deep);
    }
    select {
      padding: 6px;
      border-radius: 6px;
      border: 1px solid var(--deep);
    }
    .subheader {
      display: flex;
      justify-content: space-between;
      padding: 10px 20px;
      background: #fff0f7;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    .inspiration {
      font-style: italic;
      color: #7a0b4f;
    }
    .countdowns {
      display: flex;
      gap: 12px;
    }
    .count {
      background: rgba(255,255,255,0.9);
      padding: 8px;
      border-radius: 8px;
      border: 2px solid rgba(255,20,147,0.08);
      min-width: 200px;
      text-align: center;
    }
    .count strong {
      display: block;
      margin-bottom: 6px;
    }
    #whiteboard-wrap {
      position: relative;
      background: #fff0f5;
      height: 60vh;
      border-top: 2px solid white;
    }
    #board {
      width: 100%;
      height: 100%;
      display: block;
      touch-action: none;
      cursor: crosshair;
    }
    #wb-controls {
      position: absolute;
      left: 12px;
      bottom: 12px;
      z-index: 40;
      background: rgba(255,255,255,0.95);
      padding: 8px;
      border-radius: 10px;
      border: 2px solid rgba(255,20,147,0.12);
      display: flex;
      gap: 8px;
      align-items: center;
    }
    #wb-controls label {
      font-size: 13px;
      color: var(--deep);
    }
    #petArea {
      position: absolute;
      bottom: 24px;
      right: 24px;
      width: 180px;
      height: 180px;
      background: rgba(255,255,255,0.9);
      border-radius: 12px;
      border: 2px solid rgba(255,20,147,0.12);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      z-index: 30;
    }
    #petDog {
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: transform 0.3s ease;
    }
    footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background: #ffccdd;
      gap: 10px;
      flex-wrap: wrap;
    }
    audio {
      height: 36px;
    }
  </style>
</head>
<body>
  <header>
    <img id="profilePic" src="Screenshot 2025-09-25 082821.png" alt="Profile">
    <div id="name">Ella Fehlauer</div>
    <div id="top-controls">
      <input id="picUpload" type="file" accept="image/*" title="Upload profile picture">
      <button id="avatarBtn" class="secondary" title="Use avatar">Avatar</button>
      <select id="themeSelect" title="Theme">
        <option value="pink">Pink</option>
        <option value="purple">Purple</option>
        <option value="teal">Teal</option>
        <option value="rainbow">Rainbow</option>
      </select>
      <button id="schoolBtn">School Tools</button>
    </div>
  </header>

  <div class="subheader">
    <div class="inspiration">
      <div id="quote">‚Äú‚Ä¶‚Äù</div>
      <div style="margin-top:6px">
        <button id="affirmBtn">Daily Affirmation</button>
        <span id="affirmation"></span>
      </div>
    </div>
    <div class="countdowns">
      <div class="count"><strong>‚òÄÔ∏è Summer Vacation</strong><div id="summerTimer">‚Äî</div></div>
      <div class="count"><strong>üéÑ Christmas</strong><div id="christmasTimer">‚Äî</div></div>
    </div>
  </div>

  <div id="whiteboard-wrap">
    <canvas id="board"></canvas>
    <div id="wb-controls">
      <label for="colorPicker">Color</label>
      <input id="colorPicker" type="color" value="#ff4d94">
      <label for="brushSize">Size</label>
      <input id="brushSize" type="range" min="1" max="40" value="6">
      <button id="eraserBtn" class="secondary">Eraser</button>
      <button id="clearBtn">Clear</button>
      <button id="downloadBtn" class="secondary">Save PNG</button>
      <button id="stickerBtn">Sticker</button>
    </div>
    <div id="petArea">
      <img id="petDog" src="https://i.imgur.com/Z8rXWbw.gif" alt="Wagging dog GIF">
      <!-- The src URL above is a public wagging dog GIF from Imgur. You can replace it later -->
    </div>
  </div>

  <footer>
    <button id="themeToggle">Change Theme</button>
    <button id="showCompliment" class="secondary">Compliment</button>
    <span id="complimentBox"></span>

    <div style="display:flex;align-items:center;gap:8px">
      <audio id="bgAudio" controls>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        Your browser doesn't support audio.
      </audio>
      <button id="downloadProfile" class="secondary">Save Board</button>
    </div>
  </footer>

<script>
  /* ---------- Profile pic upload & avatar ---------- */
  const profilePic = document.getElementById('profilePic');
  const picUpload = document.getElementById('picUpload');
  const avatarBtn = document.getElementById('avatarBtn');
  const savedPic = localStorage.getItem('profilePic');
  if (savedPic) profilePic.src = savedPic;
  picUpload.addEventListener('change', () => {
    const f = picUpload.files[0];
    if (!f) return;
    const reader = new FileReader();
    reader.onload = e => {
      profilePic.src = e.target.result;
      localStorage.setItem('profilePic', e.target.result);
    };
    reader.readAsDataURL(f);
  });
  avatarBtn.addEventListener('click', () => {
    const avatarURL = 'https://i.ibb.co/4Y3mJrh/avatar.png';  // sample avatar
    profilePic.src = avatarURL;
    localStorage.setItem('profilePic', avatarURL);
  });

  /* ---------- Quotes & Affirmations ---------- */
  const quotes = [
    "Believe in yourself and all you are.",
    "Every day is a new opportunity.",
    "Dream big, start small.",
    "You are stronger than you know.",
    "Small steps lead to big changes."
  ];
  document.getElementById('quote').innerText = quotes[Math.floor(Math.random()*quotes.length)];
  const affirmations = [
    "You are amazing just as you are.",
    "You‚Äôve got this!",
    "Keep going, you're doing great.",
    "Your future is bright.",
    "Be proud of how far you‚Äôve come."
  ];
  document.getElementById('affirmBtn').addEventListener('click', () => {
    document.getElementById('affirmation').innerText =
      affirmations[Math.floor(Math.random()*affirmations.length)];
  });

  /* ---------- Compliments ---------- */
  const compliments = ["You rock! üíñ","Keep shining! ‚ú®","Unstoppable you!","Smiles suit you üòä","You make magic happen."];
  document.getElementById('showCompliment').addEventListener('click', () => {
    document.getElementById('complimentBox').innerText =
      compliments[Math.floor(Math.random()*compliments.length)];
  });

  /* ---------- Whiteboard ---------- */
  const canvas = document.getElementById('board');
  const ctx = canvas.getContext('2d');
  const colorPicker = document.getElementById('colorPicker');
  const brushSize = document.getElementById('brushSize');
  const eraserBtn = document.getElementById('eraserBtn');
  const clearBtn = document.getElementById('clearBtn');
  const downloadBtn = document.getElementById('downloadBtn');
  const stickerBtn = document.getElementById('stickerBtn');

  function resizeCanvas(){
    const wrap = document.getElementById('whiteboard-wrap');
    canvas.width = wrap.clientWidth;
    canvas.height = wrap.clientHeight;
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  let drawing = false, erasing = false;
  canvas.addEventListener('pointerdown', e => {
    drawing = true;
    const r = canvas.getBoundingClientRect();
    ctx.beginPath();
    ctx.moveTo(e.clientX - r.left, e.clientY - r.top);
  });
  canvas.addEventListener('pointerup', () => {
    drawing = false;
    ctx.beginPath();
  });
  canvas.addEventListener('pointermove', e => {
    if (!drawing) return;
    const r = canvas.getBoundingClientRect();
    const x = e.clientX - r.left;
    const y = e.clientY - r.top;
    if (erasing) {
      ctx.globalCompositeOperation = 'destination-out';
      ctx.lineWidth = brushSize.value;
      ctx.lineCap = 'round';
      ctx.lineTo(x, y);
      ctx.stroke();
    } else {
      ctx.globalCompositeOperation = 'source-over';
      ctx.strokeStyle = colorPicker.value;
      ctx.lineWidth = brushSize.value;
      ctx.lineCap = 'round';
      ctx.lineTo(x, y);
      ctx.stroke();
    }
    ctx.beginPath();
    ctx.moveTo(x, y);
  });

  eraserBtn.addEventListener('click', () => {
    erasing = !erasing;
    eraserBtn.textContent = erasing ? 'Eraser ‚úì' : 'Eraser';
  });
  clearBtn.addEventListener('click', () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  });
  downloadBtn.addEventListener('click', () => {
    const data = canvas.toDataURL('image/png');
    const a = document.createElement('a');
    a.href = data;
    a.download = 'whiteboard.png';
    a.click();
  });
  stickerBtn.addEventListener('click', () => {
    const r = canvas.getBoundingClientRect();
    const x = Math.random() * (r.width - 40) + 20;
    const y = Math.random() * (r.height - 40) + 20;
    ctx.save();
    ctx.font = '36px serif';
    ctx.fillText('üíñ', x, y);
    ctx.restore();
  });

  /* ---------- Countdown Timers ---------- */
  function formatDiff(target, includeYears=false) {
    const now = new Date();
    let diff = target - now;
    if (diff <= 0) return "It's here!";
    const years = includeYears ? Math.floor(diff/(1000*60*60*24*365.25)) : 0;
    const months = Math.floor((diff/(1000*60*60*24*30.44))%12);
    const days = Math.floor((diff/(1000*60*60*24))%30.44);
    const hours = Math.floor((diff/(1000*60*60))%24);
    const minutes = Math.floor((diff/(1000*60))%60);
    const seconds = Math.floor((diff/1000)%60);
    return (includeYears ? years + 'y, ' : '') + `${months}mo ${days}d ${hours}h ${minutes}m ${seconds}s`;
  }
  function updateTimers(){
    const christmas = new Date('2025-12-25T00:00:00');
    const summer = new Date('2026-05-29T00:00:00');
    document.getElementById('christmasTimer').innerText = formatDiff(christmas, false);
    document.getElementById('summerTimer').innerText = formatDiff(summer, true);
  }
  setInterval(updateTimers, 1000);
  updateTimers();

  /* ---------- Pet Interaction (2D dog GIF) ---------- */
  const petDog = document.getElementById('petDog');
  petDog.addEventListener('click', () => {
    petDog.style.transform = 'translateY(-20px)';
    setTimeout(() => { petDog.style.transform = 'translateY(0)'; }, 300);
  });

  document.getElementById('feedBtn').addEventListener('click', () => {
    // drop a treat emoji
    const treat = document.createElement('div');
    treat.innerText = 'üçñ';
    treat.style.position = 'fixed';
    treat.style.right = '100px';
    treat.style.bottom = '250px';
    treat.style.fontSize = '28px';
    treat.style.zIndex = '9999';
    document.body.appendChild(treat);

    const petRect = petDog.getBoundingClientRect();
    const targetX = petRect.left + petRect.width / 2;
    const targetY = petRect.top + petRect.height / 2;

    let start = null;
    const startX = window.innerWidth - 100;
    const startY = window.innerHeight - 80;

    function animateTreat(ts) {
      if (!start) start = ts;
      const p = Math.min(1, (ts - start) / 700);
      treat.style.right = (window.innerWidth - (startX + (targetX - startX) * p)) + 'px';
      treat.style.bottom = (window.innerHeight - (startY + (targetY - startY) * p)) + 'px';
      treat.style.transform = `scale(${1 - 0.3 * p})`;
      if (p < 1) requestAnimationFrame(animateTreat);
      else {
        setTimeout(() => { treat.remove(); petDog.click(); }, 80);
      }
    }
    requestAnimationFrame(animateTreat);
  });

  /* ---------- Theme Toggle & Select ---------- */
  const themeSelect = document.getElementById('themeSelect');
  const themeToggle = document.getElementById('themeToggle');
  const stored = localStorage.getItem('siteTheme') || 'pink';
  themeSelect.value = stored;
  applyTheme(stored);
  themeSelect.addEventListener('change', () => {
    applyTheme(themeSelect.value);
    localStorage.setItem('siteTheme', themeSelect.value);
  });
  themeToggle.addEventListener('click', () => {
    const opts = ['pink','purple','teal','rainbow'];
    const idx = (opts.indexOf(themeSelect.value) + 1) % opts.length;
    themeSelect.value = opts[idx];
    applyTheme(opts[idx]);
    localStorage.setItem('siteTheme', opts[idx]);
  });
  function applyTheme(name) {
    if (name === 'pink') {
      document.body.style.background = varOr('--light');
      document.documentElement.style.setProperty('--deep', '#ff1493');
    } else if (name === 'purple') {
      document.body.style.background = '#f6e9ff';
      document.documentElement.style.setProperty('--deep', 'var(--purple)');
    } else if (name === 'teal') {
      document.body.style.background = '#e8fffb';
      document.documentElement.style.setProperty('--deep', 'var(--teal)');
    } else { // rainbow
      document.body.style.background = 'linear-gradient(90deg,#ffe4f2,#fff0f5,#e8f8ff,#fff3e6)';
      document.documentElement.style.setProperty('--deep', '#ff1493');
    }
  }
  function varOr(v) {
    return getComputedStyle(document.documentElement).getPropertyValue(v).trim();
  }

  /* ---------- Compliment initial ---------- */
  document.getElementById('complimentBox').innerText = compliments[Math.floor(Math.random()*compliments.length)];

  /* ---------- School button ---------- */
  document.getElementById('schoolBtn').addEventListener('click', () => {
    window.location.href = 'school.html';
  });

  /* ---------- Download Profile (board) ---------- */
  document.getElementById('downloadProfile').addEventListener('click', () => {
    const data = canvas.toDataURL('image/png');
    const a = document.createElement('a');
    a.href = data;
    a.download = 'whiteboard.png';
    a.click();
  });

  console.log('Profile page ready with 2D pet animation and full features.');
</script>
</body>
</html>
