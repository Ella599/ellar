<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ella Fehlauer ‚Äî Profile</title>
<!-- THREE.JS CDN -->
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
<style>
  :root{
    --pink:#ff69b4; --deep:#ff1493; --light:#ffe4f2;
    --purple:#a020f0; --teal:#20c5b6;
  }
  html,body{height:100%;margin:0;font-family:system-ui,Arial;}
  body { background: var(--light); color:var(--deep); overflow:hidden; }
  header{display:flex;align-items:center;gap:12px;padding:12px 18px;background:linear-gradient(90deg,#ffd6e8, #fff0f5);box-shadow:0 2px 6px rgba(0,0,0,0.08);}
  #profilePic{width:92px;height:92px;border-radius:50%;object-fit:cover;border:3px solid var(--deep);}
  #name{font-size:22px;font-weight:700;color:var(--deep);}
  #picUpload{margin-left:6px;}
  .top-controls{display:flex;gap:10px;margin-left:auto;align-items:center;}
  button,input,select{font-family:inherit}
  button{background:var(--deep);color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
  button.secondary{background:#fff;color:var(--deep);border:2px solid var(--deep)}
  .controls-row{display:flex;gap:10px;align-items:center;padding:10px 18px;background:#fff0f7}
  #whiteboard-wrap{position:relative;width:100%;height:62vh;background:#fff0f5;border-top:2px solid rgba(255,20,147,0.08)}
  #board{width:100%;height:100%;display:block;touch-action:none;cursor:crosshair}
  .wb-controls{position:absolute;left:12px;top:12px;z-index:30;background:rgba(255,255,255,0.9);padding:8px;border-radius:10px;border:2px solid rgba(255,20,147,0.12);display:flex;gap:8px;align-items:center}
  .wb-controls label{font-size:13px;color:var(--deep);margin-right:6px}
  .right-panel{position:absolute;right:18px;top:110px;z-index:30;display:flex;flex-direction:column;gap:12px}
  .panel {background:rgba(255,255,255,0.95);padding:12px;border-radius:10px;border:2px solid rgba(255,20,147,0.08);min-width:220px}
  .countdown h4{margin:2px 0 6px 0}
  .toolbar {display:flex;gap:8px;align-items:center}
  /* sparkles and hearts */
  .sparkle{position:fixed;width:6px;height:6px;border-radius:50%;pointer-events:none;z-index:1000;mix-blend-mode:screen;opacity:0.9}
  .heart{position:fixed;font-size:20px;pointer-events:none;z-index:900;opacity:0.9}
  /* pet area */
  #petWrap{width:300px;height:240px}
  /* theme classes */
  body.theme-purple{--deep:var(--purple);--pink:#d890ff;--light:#f6e9ff}
  body.theme-teal{--deep:var(--teal);--pink:#88e4d8;--light:#e8fffb}
  body.theme-rainbow{background:linear-gradient(90deg,#ffe4f2,#fff0f5,#e8f8ff,#fff3e6);--deep:#ff1493}
  /* mobile tidy */
  @media(max-width:900px){
    #petWrap{width:220px;height:180px}
    .right-panel{right:8px;top:120px}
  }
</style>
</head>
<body>
  <header>
    <img id="profilePic" src="Screenshot 2025-09-25 082821.png" alt="Profile">
    <div>
      <div id="name">Ella Fehlauer</div>
      <div style="font-size:13px;color:#c02a78">Personal Profile</div>
    </div>

    <div class="top-controls">
      <input id="picUpload" type="file" accept="image/*" title="Upload profile pic">
      <select id="themeSelect" title="Theme">
        <option value="default">Pink</option>
        <option value="purple">Purple</option>
        <option value="teal">Teal</option>
        <option value="rainbow">Rainbow</option>
      </select>
      <button id="musicBtn" class="secondary">Play Music</button>
      <button onclick="location.href='school.html'">üìö School Tools</button>
    </div>
  </header>

  <!-- controls row -->
  <div class="controls-row">
    <div style="display:flex;gap:10px;align-items:center;">
      <label style="font-weight:700;color:var(--deep)">Whiteboard:</label>
      <div class="wb-controls">
        <label for="colorPicker">Color</label>
        <input id="colorPicker" type="color" value="#ff4d94">
        <label for="sizeRange">Size</label>
        <input id="sizeRange" type="range" min="1" max="40" value="6">
        <button id="eraserBtn" class="secondary">Eraser</button>
        <button id="clearBtn">Clear</button>
        <button id="downloadBtn" class="secondary">Download PNG</button>
      </div>
    </div>

    <div style="margin-left:auto;display:flex;align-items:center;gap:12px">
      <div id="complimentBox" style="font-style:italic;color:#b71c5a"></div>
      <div style="font-size:13px;color:#a31860">Try the pet ‚Äî click to make it jump!</div>
    </div>
  </div>

  <!-- whiteboard area -->
  <div id="whiteboard-wrap">
    <canvas id="board"></canvas>

    <!-- right column for countdowns, pet, music controls -->
    <div class="right-panel">
      <div class="panel countdown">
        <h4>‚òÄÔ∏è Summer Vacation!</h4>
        <div id="summerTimer">‚Äî</div>
      </div>

      <div class="panel countdown">
        <h4>üéÑ Christmas!</h4>
        <div id="christmasTimer">‚Äî</div>
      </div>

      <div class="panel" id="petPanel">
        <h4>üê∂ Pet (Dog)</h4>
        <div id="petWrap"></div>
        <div style="margin-top:8px;display:flex;gap:8px">
          <input id="petUpload" type="file" accept=".glb,.gltf" title="Replace pet model (GLB)">
          <button id="petReset" class="secondary">Reset Dog</button>
        </div>
      </div>
    </div>
  </div>

  <!-- audio (sample royalty-free tracks included as placeholders) -->
  <audio id="bgAudio" loop>
    <source src="https://cdn.jsdelivr.net/gh/itsjoemusic/royalty-free@main/soft-loop.mp3" type="audio/mpeg">
    <!-- placeholder: you can replace src with your own file in the repo -->
  </audio>

<script>
/* ---------------- Profile Pic Upload (persist) ---------------- */
const profilePic = document.getElementById('profilePic');
const picUpload = document.getElementById('picUpload');
const savedPic = localStorage.getItem('profilePic');
if(savedPic) profilePic.src = savedPic;
picUpload.addEventListener('change', ()=> {
  const f = picUpload.files[0];
  if(!f) return;
  const r = new FileReader();
  r.onload = e => {
    profilePic.src = e.target.result;
    localStorage.setItem('profilePic', e.target.result);
  };
  r.readAsDataURL(f);
});

/* ---------------- Theme Toggle ---------------- */
const themeSelect = document.getElementById('themeSelect');
const savedTheme = localStorage.getItem('siteTheme') || 'default';
themeSelect.value = savedTheme==='default' ? 'default' : savedTheme;
applyTheme(savedTheme);
themeSelect.addEventListener('change', (e)=> { applyTheme(e.target.value); localStorage.setItem('siteTheme', e.target.value); });
function applyTheme(name){
  document.body.classList.remove('theme-purple','theme-teal','theme-rainbow');
  if(name==='purple') document.body.classList.add('theme-purple');
  if(name==='teal') document.body.classList.add('theme-teal');
  if(name==='rainbow') document.body.classList.add('theme-rainbow');
}

/* ---------------- Compliment Box ---------------- */
const compliments = ["You‚Äôre amazing! üíï","Keep shining! ‚ú®","You can do anything! üåü","Never stop smiling üíñ","You‚Äôve got this! üå∏"];
document.getElementById('complimentBox').innerText = compliments[Math.floor(Math.random()*compliments.length)];

/* ---------------- Music Player ---------------- */
const bgAudio = document.getElementById('bgAudio');
const musicBtn = document.getElementById('musicBtn');
let playing = false;
musicBtn.addEventListener('click', ()=>{
  if(playing){ bgAudio.pause(); musicBtn.textContent='Play Music'; }
  else { bgAudio.play().catch(()=>{}); musicBtn.textContent='Pause Music'; }
  playing = !playing;
});

/* ---------------- Whiteboard (full width) ---------------- */
const canvas = document.getElementById('board');
const ctx = canvas.getContext('2d');
function resizeCanvas(){
  const wrap = document.getElementById('whiteboard-wrap');
  canvas.width = wrap.clientWidth;
  canvas.height = wrap.clientHeight;
  // no persistence of drawing per your instructions
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

let drawing=false, erasing=false;
const colorPicker = document.getElementById('colorPicker');
const sizeRange = document.getElementById('sizeRange');
const eraserBtn = document.getElementById('eraserBtn');
const clearBtn = document.getElementById('clearBtn');
const downloadBtn = document.getElementById('downloadBtn');

canvas.addEventListener('pointerdown', e=>{ drawing=true; draw(e); });
canvas.addEventListener('pointerup', ()=>{ drawing=false; ctx.beginPath(); });
canvas.addEventListener('pointermove', draw);

function draw(e){
  if(!drawing) return;
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left, y = e.clientY - rect.top;
  if(erasing){
    ctx.globalCompositeOperation='destination-out';
    ctx.beginPath();
    ctx.arc(x,y,sizeRange.value,0,Math.PI*2);
    ctx.fill();
    ctx.globalCompositeOperation='source-over';
  } else {
    ctx.fillStyle = colorPicker.value;
    ctx.beginPath();
    ctx.arc(x,y,sizeRange.value,0,Math.PI*2);
    ctx.fill();
  }
  // sparkle near pointer
  createSparkle(e.clientX,e.clientY);
}

eraserBtn.addEventListener('click', ()=>{ erasing=!erasing; eraserBtn.textContent = erasing ? 'Eraser ‚úì' : 'Eraser';});
clearBtn.addEventListener('click', ()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); });
downloadBtn.addEventListener('click', ()=>{
  const data = canvas.toDataURL('image/png');
  const a = document.createElement('a');
  a.href = data; a.download = 'doodle.png'; a.click();
});

/* small sparkle effect */
function createSparkle(pageX,pageY){
  const s = document.createElement('div');
  s.className='sparkle';
  s.style.left = (pageX - 3) + 'px';
  s.style.top = (pageY - 3) + 'px';
  s.style.background = colorPicker.value;
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),700);
}

/* ---------------- Floating Hearts (decor) ---------------- */
setInterval(()=>{
  const heart = document.createElement('div');
  heart.className='heart';
  heart.innerText='üíñ';
  heart.style.left = Math.random() * (window.innerWidth - 40) + 'px';
  heart.style.top = (window.innerHeight - 10) + 'px';
  heart.style.animation = `floatUp ${4 + Math.random()*3}s linear forwards`;
  heart.style.opacity = (0.6 + Math.random()*0.4);
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),7000);
},2500);

/* ---------------- Countdown timers ---------------- */
function getNextChristmas(){
  const now = new Date();
  let year = now.getFullYear();
  const c = new Date(year,11,25);
  if(now > c) c.setFullYear(year+1);
  return c;
}
function updateCountdowns(){
  const summer = new Date("May 29, 2026 00:00:00");
  const christmas = getNextChristmas();
  document.getElementById('summerTimer').innerText = formatTimeDiff(summer, true);
  document.getElementById('christmasTimer').innerText = formatTimeDiff(christmas, false);
}
function formatTimeDiff(target, includeYears){
  const now = new Date();
  let diff = target - now;
  if(diff<=0) return "It's here!";
  const years = includeYears ? Math.floor(diff / (1000*60*60*24*365.25)) : 0;
  const months = Math.floor((diff / (1000*60*60*24*30.44)) % 12);
  const days = Math.floor((diff / (1000*60*60*24)) % 30.44);
  const hours = Math.floor((diff/(1000*60*60))%24);
  const minutes = Math.floor((diff/(1000*60))%60);
  const seconds = Math.floor((diff/1000)%60);
  return (includeYears ? `${years}y, ` : '') + `${months}mo ${days}d ${hours}h ${minutes}m ${seconds}s`;
}
setInterval(updateCountdowns,1000);
updateCountdowns();

/* ---------------- 3D Pet (procedural dog using Three.js primitives) ---------------- */
const petWrap = document.getElementById('petWrap');
let scene, camera, renderer, petGroup, clock;
initPet();
animatePet();

function initPet(){
  // scene + camera
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(45, petWrap.clientWidth/petWrap.clientHeight, 0.1, 1000);
  camera.position.set(0,1.2,3);
  renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
  renderer.setSize(petWrap.clientWidth, petWrap.clientHeight);
  petWrap.appendChild(renderer.domElement);
  // lights
  const amb = new THREE.AmbientLight(0xffffff, 0.8);
  scene.add(amb);
  const dir = new THREE.DirectionalLight(0xffffff, 0.6);
  dir.position.set(5,10,7);
  scene.add(dir);

  // group for pet
  petGroup = new THREE.Group();
  scene.add(petGroup);

  // build simple dog from primitives (head, body, legs, ears, tail)
  const bodyMat = new THREE.MeshStandardMaterial({color:0xffc0a9, roughness:0.6});
  const darkMat = new THREE.MeshStandardMaterial({color:0x8b5a3c});
  const body = new THREE.Mesh(new THREE.SphereGeometry(0.6,24,20), bodyMat);
  body.scale.set(1.6,1.0,1.0);
  body.position.set(0,0.5,0);
  petGroup.add(body);

  const head = new THREE.Mesh(new THREE.SphereGeometry(0.38,24,20), bodyMat);
  head.position.set(0.9,0.95,0.0);
  petGroup.add(head);

  const snout = new THREE.Mesh(new THREE.CylinderGeometry(0.12,0.12,0.5,12), bodyMat);
  snout.rotation.z = Math.PI/2;
  snout.position.set(1.28,0.93,0);
  petGroup.add(snout);

  const nose = new THREE.Mesh(new THREE.SphereGeometry(0.07,12,8), darkMat);
  nose.position.set(1.52,0.93,0);
  petGroup.add(nose);

  const earL = new THREE.Mesh(new THREE.ConeGeometry(0.12,0.28,10), darkMat);
  earL.position.set(0.95,1.3,0.16); earL.rotation.z=0.5; petGroup.add(earL);
  const earR = earL.clone(); earR.position.set(0.95,1.3,-0.16); earR.rotation.z=-0.5; petGroup.add(earR);

  // legs
  for(let i=-1;i<=1;i+=2){
    for(let j=0;j<2;j++){
      const leg = new THREE.Mesh(new THREE.CylinderGeometry(0.09,0.09,0.6,10), bodyMat);
      leg.position.set(i*0.5,0.15,(j-0.5)*0.35);
      petGroup.add(leg);
    }
  }
  // tail
  const tail = new THREE.Mesh(new THREE.CylinderGeometry(0.06,0.06,0.6,8), darkMat);
  tail.position.set(-1.05,0.75,0); tail.rotation.z = Math.PI/3;
  petGroup.add(tail);

  // eyes
  const eyeMat = new THREE.MeshStandardMaterial({color:0x000000});
  const eyeL = new THREE.Mesh(new THREE.SphereGeometry(0.04,8,8), eyeMat);
  eyeL.position.set(1.02,1.02,0.12); petGroup.add(eyeL);
  const eyeR = eyeL.clone(); eyeR.position.set(1.02,1.02,-0.12); petGroup.add(eyeR);

  // set initial pet rotation
  petGroup.rotation.y = -0.6;

  // make interactive: on click, jump/wiggle
  renderer.domElement.addEventListener('click', ()=> { petJump(); });

  // responsive handling
  window.addEventListener('resize', ()=> {
    renderer.setSize(petWrap.clientWidth, petWrap.clientHeight);
    camera.aspect = petWrap.clientWidth / petWrap.clientHeight;
    camera.updateProjectionMatrix();
  });

  clock = new THREE.Clock();
}

let jumpStart = 0;
function petJump(){
  jumpStart = performance.now();
  // small rotation wiggle
  petGroup.rotation.x = 0.2;
  setTimeout(()=> petGroup.rotation.x = 0, 400);
}

function animatePet(){
  requestAnimationFrame(animatePet);
  const t = clock.getElapsedTime();
  // slow breathing/rotation
  petGroup.rotation.y += 0.003;
  // bob up and down
  petGroup.position.y = 0.05 * Math.sin(t*2);
  // if in jump timeframe, apply vertical boost
  if(jumpStart && performance.now() - jumpStart < 400){
    const progress = (performance.now() - jumpStart)/400;
    petGroup.position.y = 0.8 * Math.sin(Math.PI * progress);
  } else if(performance.now() - jumpStart >= 400){
    jumpStart = 0;
  }
  renderer.render(scene,camera);
}

/* allow replacing pet with a GLB model if user uploads one (optional) */
const petUpload = document.getElementById('petUpload');
const petReset = document.getElementById('petReset');
petReset.addEventListener('click', ()=>{ // rebuild default pet
  if(scene && petGroup) { scene.remove(petGroup); initPet(); }
});
petUpload.addEventListener('change', () => {
  const f = petUpload.files[0];
  if(!f) return;
  // if user supplies a GLB, we can load it with GLTFLoader - dynamically load script and then parse file
  const reader = new FileReader();
  reader.onload = function(evt){
    // attempt to parse as arraybuffer GLB and load via GLTFLoader if available
    // For simplicity we show a message - advanced: add GLTFLoader code to load from arraybuffer
    alert('Custom GLB upload received. To load local GLB replace the code with GLTFLoader logic or provide a URL to the model in the repo.');
  };
  reader.readAsArrayBuffer(f);
});

/* ---------------- Sparkle cursor (mouse) ---------------- */
document.addEventListener('mousemove', e=>{
  const el = document.createElement('div');
  el.className='sparkle';
  el.style.left=(e.pageX-3)+'px'; el.style.top=(e.pageY-3)+'px';
  el.style.background = colorPicker.value;
  document.body.appendChild(el);
  setTimeout(()=>el.remove(),700);
});

/* ---------------- End of script ---------------- */
</script>
</body>
</html>
